:original_name: dds_api_021.html

.. _dds_api_021:

Querying DB Instances in the Recycle Bin
========================================

API Description
---------------

This API is used to query DB instances in the recycle bin.

URI
---

-  URI format

   GET https://{Endpoint}/v3/{project_id}/recycle-instances

-  Parameter description

   .. table:: **Table 1** Request parameters

      +--------------+-----------+--------+---------------------------------------------------+
      | Name         | Mandatory | Type   | Description                                       |
      +==============+===========+========+===================================================+
      | x-auth-token | Yes       | String | User token.                                       |
      +--------------+-----------+--------+---------------------------------------------------+
      | project_id   | Yes       | String | Specifies the project ID of a tenant in a region. |
      +--------------+-----------+--------+---------------------------------------------------+

   .. table:: **Table 2** Query parameters

      +--------+-----------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Name   | Mandatory | Type    | Description                                                                                                                                                                                                                       |
      +========+===========+=========+===================================================================================================================================================================================================================================+
      | offset | No        | Integer | Index offset. If **offset** is set to *N*, the resource query starts from the N+1 piece of data. The default value is **0**, indicating that the query starts from the first piece of data. The value must be a positive integer. |
      +--------+-----------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | limit  | No        | Integer | Number of records displayed on each page. The default value is **100**.                                                                                                                                                           |
      +--------+-----------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Requests
--------

-  Example request

   GET https://dds.eu-de.otc.t-systems.com/v3/0549b4a43100d4f32f51c01c2fe4acdb/recycle-instances

Responses
---------

-  Parameter description

   .. table:: **Table 3** Response body parameters

      +-------------+-----------------------------------------------------------------+--------------------------+
      | Name        | Type                                                            | Description              |
      +=============+=================================================================+==========================+
      | total_count | Integer                                                         | Total number of records. |
      +-------------+-----------------------------------------------------------------+--------------------------+
      | instances   | Array of :ref:`Table 4 <dds_api_021__table88115251643>` objects | Instance information.    |
      +-------------+-----------------------------------------------------------------+--------------------------+

   .. _dds_api_021__table88115251643:

   .. table:: **Table 4** RecycleInstance

      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | Name                  | Type                                                  | Description                                                                                     |
      +=======================+=======================================================+=================================================================================================+
      | id                    | String                                                | DB instance ID.                                                                                 |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | name                  | String                                                | DB instance name.                                                                               |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | mode                  | String                                                | Instance type. Cluster, replica set, and single node instances are supported. The value can be: |
      |                       |                                                       |                                                                                                 |
      |                       |                                                       | -  Sharding                                                                                     |
      |                       |                                                       | -  ReplicaSet                                                                                   |
      |                       |                                                       | -  Single                                                                                       |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | datastore             | :ref:`Table 5 <dds_api_021__table38663369715>` object | Database information.                                                                           |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | pay_mode              | String                                                | Billing mode.                                                                                   |
      |                       |                                                       |                                                                                                 |
      |                       |                                                       | -  **0**: indicates the instance is billed on a pay-per-use basis.                              |
      |                       |                                                       | -  **1**: indicates the instance is billed based on a yearly/monthly basis.                     |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | enterprise_project_id | String                                                | Enterprise project ID. The value **0** indicates the default enterprise project.                |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | backup_id             | String                                                | Backup ID.                                                                                      |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | created_at            | String                                                | Creation time.                                                                                  |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | deleted_at            | String                                                | Deletion time.                                                                                  |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | retained_until        | String                                                | Retention end time.                                                                             |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+
      | status                | String                                                | Instance backup recycling status.                                                               |
      +-----------------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------+

   .. _dds_api_021__table38663369715:

   .. table:: **Table 5** RecycleDatastore

      +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------+
      | Name                  | Type                  | Description                                                                                                          |
      +=======================+=======================+======================================================================================================================+
      | type                  | String                | Database type. The value is **DDS-Community**.                                                                       |
      |                       |                       |                                                                                                                      |
      |                       |                       | Enumerated values:                                                                                                   |
      |                       |                       |                                                                                                                      |
      |                       |                       | -  DDS-Community                                                                                                     |
      +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------+
      | version               | String                | Database version. Versions 3.4, 4.0, 4.2, and 4.4 are supported. The value can be **3.4, 4.0,** **4.2,** or **4.4**. |
      +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------+

-  Response Example

   .. code-block::

      {
        "total_count" : 1,
        "instances" : [ {
          "id" : "07fc12a8e0e94df7a3fcf53d0b5e1605in02",
          "name" : "test1",
          "mode" : "ReplicaSet",
          "datastore" : {
            "type" : "DDS-Community",
            "version" : "4.0"
          },
          "pay_mode" : "0",
          "enterprise_project_id" : "0",
          "backup_id" : "bf9ee62a7f7044c583c6765c916c36edbr02",
          "created_at" : "2022-01-01T10:00:00",
          "deleted_at" : "2022-02-01T10:00:00",
          "retained_until" : "2022-05-01T10:00:00",
          "status" : "Active"
        } ]
      }

Status Code
-----------

Status Code:200.

For more information, see :ref:`Status Code <dds_status_code>`.

Error Code
----------

For more information, see :ref:`Error Code <dds_error_code>`.
