:original_name: dds_api_0037.html

.. _dds_api_0037:

DDS Actions
===========

.. table:: **Table 1** DB instance management actions

   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Permissions                                                          | APIs                                                                                                                                                               | Action                           | IAM Project | Enterprise Project |
   +======================================================================+====================================================================================================================================================================+==================================+=============+====================+
   | Creating a DB instance                                               | POST /v3/{project_id}/instances                                                                                                                                    | dds:instance:create              | Y           | x                  |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:vpcs:list                    |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:vpcs:get                     |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:subnets:get                  |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:securityGroups:get           |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:ports:get                    |             |                    |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Querying DB instances                                                | GET /v3/{project_id}/instances?id={id}&name={name}&mode={mode}&datastore_type={datastore_type}&vpc_id={vpc_id}&subnet_id={subnet_id}&offset={offset}&limit={limit} | dds:instance:list                | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Deleting a DB instance                                               | DELETE /v3/{project_id}/instances/{instance_id}                                                                                                                    | dds:instance:deleteInstance      | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Restarting a DB instance                                             | POST /v3/{project_id}/instances/{instance_id}/restart                                                                                                              | dds:instance:reboot              | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Scaling up storage space                                             | POST /v3/{project_id}/instances/{instance_id}/enlarge-volume                                                                                                       | dds:instance:extendVolume        | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Adding nodes for a cluster instance                                  | POST /v3/{project_id}/instances/{instance_id}/enlarge                                                                                                              | dds:instance:extendNode          | Y           | x                  |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:vpcs:list                    |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:vpcs:get                     |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:subnets:get                  |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:securityGroups:get           |             |                    |
   |                                                                      |                                                                                                                                                                    |                                  |             |                    |
   |                                                                      |                                                                                                                                                                    | vpc:ports:get                    |             |                    |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Modifying DB instance specifications                                 | POST /v3/{project_id}/instances/{instance_id}/resize                                                                                                               | dds:instance:modifySpec          | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Performing a primary/secondary switchover in a replica set instance. | POST /v3/{project_id}/instances/{instance_id}/switchover                                                                                                           | dds:instance:switchover          | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Enabling or disabling SSL                                            | POST/v3/{project_id}/instances/{instance_id}/switch-ssl                                                                                                            | dds:instance:modifySSL           | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Changing a DB instance name                                          | PUT /v3/{project_id}/instances/{instance_id}/modify-name                                                                                                           | dds:instance:modify              | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Changing a database port                                             | POST /v3/{project_id}/instances/{instance_id}/modify-port                                                                                                          | dds:instance:modifyPort          | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Changing a security group                                            | POST /v3/{project_id}/instances/{instance_id}/modify-security-group                                                                                                | dds:instance:modifySecurityGroup | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Binding an EIP                                                       | POST /v3/{project_id}/nodes/{node_id}/bind-eip                                                                                                                     | dds:instance:bindPublicIp        | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Unbinding an EIP                                                     | POST /v3/{project_id}/nodes/{node_id}/unbind-eip                                                                                                                   | dds:instance:unbindPublicIp      | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Changing the private IP address of a DB instance.                    | POST /v3/{project_id}/instances/{instance_id}/modify-internal-ip                                                                                                   | dds:instance:modifyVIP           | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+
   | Enabling shard or config IP addresses                                | POST /v3/{project_id}/instances/{instance_id}/create-ip                                                                                                            | dds:instance:createIp            | Y           | x                  |
   +----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+-------------+--------------------+

.. table:: **Table 2** Connection Management

   +--------------------------------------------------------+---------------------------------------------------------+----------------------+-------------+--------------------+
   | Permissions                                            | API                                                     | Action               | IAM Project | Enterprise Project |
   +========================================================+=========================================================+======================+=============+====================+
   | Querying sessions of an instance node                  | GET /v3/{project_id}/nodes/{node_id}/sessions           | dds:instance:session | Y           | x                  |
   +--------------------------------------------------------+---------------------------------------------------------+----------------------+-------------+--------------------+
   | Killing a session of an instance node                  | POST /v3/{project_id}/nodes/{node_id}/session           | dds:instance:session | Y           | x                  |
   +--------------------------------------------------------+---------------------------------------------------------+----------------------+-------------+--------------------+
   | Querying the number of connections to an instance node | GET                                                     | dds:instance:list    | Y           | x                  |
   |                                                        |                                                         |                      |             |                    |
   |                                                        | /v3/{projectId}/instances/{instance_id}/conn-statistics |                      |             |                    |
   +--------------------------------------------------------+---------------------------------------------------------+----------------------+-------------+--------------------+

.. table:: **Table 3** Backup and restoration

   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Permissions                                                      | APIs                                                                                                                                                                                         | Action                               | IAM Project | Enterprise Project |
   +==================================================================+==============================================================================================================================================================================================+======================================+=============+====================+
   | Creating a manual backup                                         | POST /v3/{project_id}/backups                                                                                                                                                                | dds:instance:createManualBackup      | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Deleting a manual backup                                         | DELETE /v3/{project_id}/backups/{backups_id}                                                                                                                                                 | dds:backup:delete                    | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Querying the backup list                                         | GET /v3/{project_id}/backups?instance_id={instance_id}&backup_id={backup_id}&backup_type={backup_type}&offset={offset}&limit={limit}&begin_time={begin_time}&end_time={end_time}&mode={mode} | dds:backup:list                      | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Querying an automated backup policy                              | GET /v3/{project_id}/instances/{instance_id}/backups/policy                                                                                                                                  | dds:instance:list                    | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Setting an automated backup policy                               | PUT /v3/{project_id}/instances/{instance_id}/backups/policy                                                                                                                                  | dds:instance:modifyBackupPolicy      | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Restoring data to a new DB instance                              | POST /v3/{project_id}/instances                                                                                                                                                              | dds:instance:create                  | Y           | x                  |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  |                                                                                                                                                                                              | vpc:vpcs:list                        |             |                    |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  |                                                                                                                                                                                              | vpc:vpcs:get                         |             |                    |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  |                                                                                                                                                                                              | vpc:subnets:get                      |             |                    |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  |                                                                                                                                                                                              | vpc:securityGroups:get               |             |                    |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  |                                                                                                                                                                                              | vpc:ports:get                        |             |                    |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Obtaining the link for downloading a backup file                 | GET /v3/{projectId}/backups/download-file                                                                                                                                                    | dds:backup:download                  | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Querying restoration time ranges                                 | GET /v3/{project_id}/instances/{instance_id}/restore-time                                                                                                                                    | dds:instance:list                    | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Obtaining the list of databases that can be restored             | GET                                                                                                                                                                                          | dds:instance:list                    | Y           | x                  |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  | /v3/{project_id}/instances/{instance_id}/restore-database                                                                                                                                    |                                      |             |                    |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Obtaining the list of databases collections that can be restored | GET                                                                                                                                                                                          | dds:instance:list                    | Y           | x                  |
   |                                                                  |                                                                                                                                                                                              |                                      |             |                    |
   |                                                                  | /v3/{project_id}/instances/{instance_id}/restore-collection                                                                                                                                  |                                      |             |                    |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Restoring data to the original DB instance                       | POST /v3/{project_id}/instances/recovery                                                                                                                                                     | dds:backup:refreshInstanceFromBackup | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+
   | Restoring databases and tables to a point in time                | POST /v3/{project_id}/instances/{instance_id}/restore/collections                                                                                                                            | dds:backup:refreshInstanceFromBackup | Y           | x                  |
   +------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+-------------+--------------------+

.. table:: **Table 4** Obtaining log information

   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Permissions                                        | APIs                                                            | Action                            | IAM Project | Enterprise Project |
   +====================================================+=================================================================+===================================+=============+====================+
   | Querying database slow logs                        | GET /v3/{project_id}/instances/{instance_id}/slowlog            | dds:instance:list                 | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Obtaining the link for downloading slow query logs | POST /v3/{project_id}/instances/{instance_id}/slowlog-download  | dds:instance:list                 | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Querying database error logs                       | GET /v3/{project_id}/instances/{instance_id}/errorlog           | dds:instance:list                 | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Obtaining the link for downloading error logs.     | POST /v3/{project_id}/instances/{instance_id}/errorlog-download | dds:instance:list                 | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Setting a policy for audit logs                    | POST /v3/{project_id}/instances/{instance_id}/auditlog-policy   | dds:instance:modifyAuditLogSwitch | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Querying the audit log policy                      | GET /v3/{project_id}/instances/{instance_id}/auditlog-policy    | dds:instance:list                 | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Querying the audit log list                        | GET /v3/{project_id}/instances/{instance_id}/auditlog           | dds:instance:list                 | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+
   | Obtaining the link for downloading audit logs.     | POST /v3/{project_id}/instances/{instance_id}/auditlog-links    | dds:instance:downloadAuditLog     | Y           | x                  |
   +----------------------------------------------------+-----------------------------------------------------------------+-----------------------------------+-------------+--------------------+

.. table:: **Table 5** Tag management

   +---------------------------------------------+-----------------------------------------------------------+---------------------+-------------+--------------------+
   | Permissions                                 | APIs                                                      | Action              | IAM Project | Enterprise Project |
   +=============================================+===========================================================+=====================+=============+====================+
   | Adding or deleting resource tags in batches | POST /v3/{project_id}/instances/{instance_id}/tags/action | dds:instance:modify | Y           | x                  |
   +---------------------------------------------+-----------------------------------------------------------+---------------------+-------------+--------------------+
   | Querying resource tags                      | GET /v3/{project_id}/instances/{instance_id}/tags         | dds:instance:list   | Y           | x                  |
   +---------------------------------------------+-----------------------------------------------------------+---------------------+-------------+--------------------+

.. table:: **Table 6** Database and account management

   +------------------------------------------+---------------------------------------------------------+--------------------------+-------------+--------------------+
   | Permissions                              | APIs                                                    | Action                   | IAM Project | Enterprise Project |
   +==========================================+=========================================================+==========================+=============+====================+
   | Changing the password of a database user | PUT                                                     | dds:instance:resetPasswd | Y           | x                  |
   |                                          |                                                         |                          |             |                    |
   |                                          | /v3/{project_id}/instances/{instance_id}/reset-password |                          |             |                    |
   +------------------------------------------+---------------------------------------------------------+--------------------------+-------------+--------------------+

.. note::

   The check mark (Y) indicates that an action takes effect. The cross mark (x) indicates that an action does not take effect.
