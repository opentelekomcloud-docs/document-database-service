:original_name: dds_02_0008.html

.. _dds_02_0008:

Creating a Cluster Instance
===========================

**Scenarios**
-------------

This section describes how to create a DDS cluster instance of Community Edition on the DDS management console. DDS allows you to tailor your computing resources and storage space to your business needs.

You can use your account to create a maximum of 10 cluster instances. To create more cluster instances, click |image1| in the upper right corner of the management console. On the **Service Quota** page, click **Increase Quota** to apply for quotas.

**Procedure**
-------------

#. :ref:`Log in to the DDS console. <dds_02_0043>`
#. On the **Instance Management** page, click **Create** **DB Instance**.
#. On the displayed page, configure parameters about DB instance specifications. Then, click **Create Now**.

   .. table:: **Table 1** Basic information

      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                   |
      +===================================+===============================================================================================================================================================================================================================+
      | Region                            | A region where the tenant is located. It can be changed in the upper left corner. For details, see section :ref:`Regions and AZs <dds_01_0027>`.                                                                              |
      |                                   |                                                                                                                                                                                                                               |
      |                                   | .. note::                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                               |
      |                                   |    DB instances in different regions cannot communicate with each other through a private network, and you cannot change the region of a DB instance once it is created. Therefore, exercise caution when selecting a region. |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Instance Name                  | The DB instance name can be 4 to 64 characters long. It must start with a letter and can contain only uppercase letters, lowercase letters, digits, hyphens (-), and underscores (_).                                         |
      |                                   |                                                                                                                                                                                                                               |
      |                                   | After the DB instance is created, you can change the DB instance name. For details, see section :ref:`Modifying the DB Instance Name <dds_03_0075>`.                                                                          |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Database Type                     | Community Edition                                                                                                                                                                                                             |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | DB Instance Type                  | Select **Cluster**.                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                               |
      |                                   | A cluster instance includes three types of nodes: mongos, shard, and config. shard and config use the three-node replica set architecture to ensure high availability.                                                        |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Compatible MongoDB Version        | -  3.4                                                                                                                                                                                                                        |
      |                                   | -  3.2                                                                                                                                                                                                                        |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Storage Engine                    | WiredTiger                                                                                                                                                                                                                    |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | AZ                                | A physical region where resources use independent power supply and networks. AZs are physically isolated but interconnected through the internal network. For details, see section :ref:`Regions and AZs <dds_01_0027>`.      |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Disk Encryption                   | -  **Disable**: Disable the encryption function.                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                               |
      |                                   | -  **Enable**: Enable the encryption function. This feature improves data security but slightly affects read/write performance.                                                                                               |
      |                                   |                                                                                                                                                                                                                               |
      |                                   |    **Key Name**: Select or create a private key, which is the tenant key.                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                               |
      |                                   |    .. note::                                                                                                                                                                                                                  |
      |                                   |                                                                                                                                                                                                                               |
      |                                   |       -  After a DB instance is created, the disk encryption status and the key cannot be changed. Backup data stored on OBS is not encrypted.                                                                                |
      |                                   |       -  The key cannot be disabled or deleted when being used. Otherwise, the database becomes unavailable.                                                                                                                  |
      |                                   |       -  For details about how to create a key, see the "Creating a CMK" section in the *Key Management Service User Guide*.                                                                                                  |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 2** Specifications

      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Item                              | Description                                                                                                                                                                                                                                                                                |
      +===================================+============================================================================================================================================================================================================================================================================================+
      | mongos class                      | For details about the mongos CPU and memory, see section :ref:`DB Instance Specifications <dds_01_0024>`. After a DB instance is created, you can change its CPU and memory. For details, see section :ref:`Changing the CPU or Memory of a Cluster DB Instance <en-us_topic_0104472218>`. |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | mongos quantity                   | The value ranges from 2 to 16. After a DB instance is created, you can add nodes. For details, see section :ref:`Adding Cluster Instance Nodes <en-us_topic_increase_nodes>`.                                                                                                              |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | mongos parameter group            | Parameters in a mongos parameter group can be applied to mongos nodes. After a DB instance is created, you can change the parameter group of a node. For a parameter group created by users, you can modify the parameters in the parameter group to bring out the best performance.       |
      |                                   |                                                                                                                                                                                                                                                                                            |
      |                                   | For details, see :ref:`Parameter Group <dds_03_0010>`.                                                                                                                                                                                                                                     |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | shard class                       | For details about the shard CPU and memory, see section :ref:`DB Instance Specifications <dds_01_0024>`. After a DB instance is created, you can change its CPU and memory. For details, see section :ref:`Changing the CPU or Memory of a Cluster DB Instance <en-us_topic_0104472218>`.  |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | shard storage type                | Ultra-high I/O: uses the SSD disk type.                                                                                                                                                                                                                                                    |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | shard storage space               | The value ranges from 10 GB to 1,000 GB and must be a multiple of 10. After a DB instance is created, you can scale up its storage space. For details, see section :ref:`Scaling Up Storage Space <en-us_topic_increase_storage>`.                                                         |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | shard quantity                    | shard stores user data but cannot be accessed directly by you.                                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                            |
      |                                   | The value ranges from 2 to 16. After a DB instance is created, you can add nodes. For details, see section :ref:`Adding Cluster Instance Nodes <en-us_topic_increase_nodes>`.                                                                                                              |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | shard parameter group             | Parameters in a shard parameter group can be applied to shard nodes. After a DB instance is created, you can change the parameter group of a node. For a parameter group created by users, you can modify the parameters in the parameter group to bring out the best performance.         |
      |                                   |                                                                                                                                                                                                                                                                                            |
      |                                   | For details, see :ref:`Parameter Group <dds_03_0010>`.                                                                                                                                                                                                                                     |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | config class                      | config stores DB instance configurations but cannot be accessed directly by you. For details, see :ref:`DB Instance Specifications <dds_01_0024>`.                                                                                                                                         |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | config storage type               | Ultra-high I/O: uses the SSD disk type.                                                                                                                                                                                                                                                    |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | config storage space              | The storage space is 20 GB and cannot be scaled up.                                                                                                                                                                                                                                        |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | config parameter group            | Parameters in a config parameter group can be applied to config nodes. After a DB instance is created, you can change the parameter group of a node. For a parameter group created by users, you can modify the parameters in the parameter group to bring out the best performance.       |
      |                                   |                                                                                                                                                                                                                                                                                            |
      |                                   | For details, see :ref:`Parameter Group <dds_03_0010>`.                                                                                                                                                                                                                                     |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 3** Network

      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                            |
      +===================================+========================================================================================================================================================================================================================================================================================================================================================================+
      | VPC                               | The VPC to which a DB instance belongs isolates networks for different services. It allows user to manage and configure internal networks and change network configuration, simplifying network management. You need to create or select the required VPC. For details on how to create a VPC, see section "Creating a VPC" in the *Virtual Private Cloud User Guide*. |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Subnet                            | A subnet provides dedicated network resources that are logically isolated from other networks, improving network security. After a DB instance is created, you can click the DB instance name and change the private IP address assigned by the subnet to the mongos node on the **Basic Information** page.                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                        |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                        |
      |                                   |    Changing the private IP address of a node will invalidate the previous private IP address. If an EIP is bound to the node, do not unbind the EIP during the change of the private IP address. After the change, the new private IP address is bound to the EIP.                                                                                                     |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Security Group                    | A security group controls access between DDS and other services for security.                                                                                                                                                                                                                                                                                          |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                        |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                        |
      |                                   |    Ensure that the security group rule you set allows clients to access DB instances. For example, select the TCP protocol with inbound direction, input the default port number **8635**, and enter a subnet IP address or select a security group that the DB instance belongs to.                                                                                   |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | SSL                               | Secure Sockets Layer (SSL) certificates set up encrypted connections between clients and servers, preventing data from being tampered with or stolen during transmission.                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                        |
      |                                   | You can enable SSL to improve data security. After a DB instance is created, you can connect to it in SSL mode. For details, see :ref:`Connecting to a DB Instance Through a Client <en-us_topic_0044018334>`.                                                                                                                                                         |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 4** Database configuration

      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                           |
      +===================================+=======================================================================================================================================================================================================================+
      | Administrator                     | The default account is **rwuser**.                                                                                                                                                                                    |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Administrator Password            | The password is a string of 8 to 32 characters. It must be a combination of uppercase letters, lowercase letters, digits, and special characters. You can also use the following special characters: ``~!@#%^*-_=+?`` |
      |                                   |                                                                                                                                                                                                                       |
      |                                   | The system cannot save you password. Keep the password secure.                                                                                                                                                        |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Confirm Password                  | The value of this parameter must be the same as the **Administrator Password**.                                                                                                                                       |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 5** Tag

      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                               |
      +===================================+===========================================================================================================================================================================================================+
      | Tags                              | Tags a DDS DB instance. This configuration is optional. Adding tags to DDS DB instances helps you better identify and manage them. Each DB instance can have up to 20 tags.                               |
      |                                   |                                                                                                                                                                                                           |
      |                                   | A tag is composed of a key-value pair.                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                           |
      |                                   | -  Key: Mandatory if the DB instance is going to be tagged                                                                                                                                                |
      |                                   |                                                                                                                                                                                                           |
      |                                   |    -  For each DB instance, each tag key is unique.                                                                                                                                                       |
      |                                   |    -  A tag key consists of a maximum of 36 characters.                                                                                                                                                   |
      |                                   |    -  The key can only consist of digits, letters, underscores (_), hyphens (-), and at sign (@).                                                                                                         |
      |                                   |                                                                                                                                                                                                           |
      |                                   | -  Value: Optional if the DB instance is going to be tagged                                                                                                                                               |
      |                                   |                                                                                                                                                                                                           |
      |                                   |    -  The value consists of a maximum of 43 characters.                                                                                                                                                   |
      |                                   |    -  The value can only consist of digits, letters, underscores (_), hyphens (-), and at sign (@).                                                                                                       |
      |                                   |                                                                                                                                                                                                           |
      |                                   | After a DB instance is created, you can view its tag details on the **Tags** tab. In addition, you can add, modify, and delete tags for existing DB instances. For details, see :ref:`Tag <dds_03_0023>`. |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. note::

      DB instance performance is determined by the configurations you set during its creation, including the node class and storage space.

#. On the displayed page, confirm the DB instance information.

   -  If you need to modify the specifications, click **Previous** to modify parameters.
   -  If you do not need to modify the specifications, click **Submit** to start the instance creation.

#. After a DDS DB instance is created, you can view and manage it on the **Instance Management** page.

   -  When a DB instance is being created, the status displayed in the **Status** column is **Creating**. This process takes about 15 minutes. After the creation is complete, the status changes to **Available**.
   -  DDS enables the automated backup policy by default. After a DB instance is created, you can modify or disable the automated backup policy. An automated full backup is immediately triggered after the creation of a DB instance.
   -  You can change the database port after the DB instance is created. DDS uses port 8635 by default, which is different from the default port numbers used by databases. To ensure database accessibility, you need to add the required security group rule.

.. |image1| image:: /_static/images/en-us_image_0284275249.png
